## 언리얼 JSON 직렬화

- FJsonSerializer
    - FJsonSerializer::Serialize()
    - FJsonSerializer::Deserialize()

```cpp
#include "JsonObjectConverter.h"

/* ... */

FString JsonDataAbsolutePath; // 경로 지정

// 생성할 JsonObject 객체 생성
TSharedRef<FJsonObject> JsonObjectSource = MakeShared<FJsonObject>();

// JsonObject에 값 설정
FJsonObjectConverter::UStructToJsonObject(StudentSource->GetClass(), StudentSource, JsonObjectSource);

// -----
// 파일 쓰기
// -----
// UObject -> Json 문자열 -> 파일에 저장

// Json 문자열.
FString JsonOutString;

// Json 으로 직렬화 처리를 위한 아카이브 생성.
auto JsonWriter = TJsonWriterFactory<TCHAR>::Create(&JsonOutString);

// 아카이브를 활용해 Json 문자열 생성.
if (FJsonSerializer::Serialize(JsonObjectSource, JsonWriter))
{
	// 직렬화
	// Json 문자열이 문제 없이 생성되면 파일로 저장.
	if (FFileHelper::SaveStringToFile(
		JsonOutString, *JsonDataAbsolutePath))
	{
		UE_LOG(LogTemp, Log, TEXT("Json 직렬화에 성공했습니다."));
	}
}

// -----
// 파일 읽기
// -----
// File -> JsonString -> JsonReader -> UObject

FString JsonInString;
if (!FFileHelper::LoadFileToString(JsonInString, *JsonDataAbsolutePath))
{
	UE_LOG(LogTemp, Log, TEXT("Json 데이터 파일 읽기에 실패했습니다."));
	return;
}

// JsonReader 생성.
TSharedRef<TJsonReader<TCHAR>> JsonReader = TJsonReaderFactory<TCHAR>::Create(JsonInString);

// JsonObject 생성.
TSharedPtr<FJsonObject> JsonObjectDest;

// 역직렬화
if (FJsonSerializer::Deserialize(JsonReader, JsonObjectDest))
{
	// 테스트할 UObject.
	UStudent* JsonStudentDest = NewObject<UStudent>();
	if (FJsonObjectConverter::JsonObjectToUStruct(JsonObjectDest.ToSharedRef(), JsonStudentDest->GetClass(), JsonStudentDest))
	{
		// 불러온 데이터 출력.
		UE_LOG(LogTemp, Log, TEXT("[JsonData] 이름: %s, 순번: %d"), *JsonStudentDest->GetName(), JsonStudentDest->GetOrder());
	}
}
```